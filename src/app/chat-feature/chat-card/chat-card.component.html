<mat-card class="chat-card">

  <!-- Card Avtar -->
  <div class="card-avatar">
    <img class="img-fluid rounded" src="http://www.free-icons-download.net/images/user-group-icon-74418.png">
  </div>

  <!-- Card Content -->
  <div class="card-content-top">
    <!-- Card Title -->
    <div class="card-title">
      <mat-card-header>
        <mat-card-title>
          
          <a [routerLink]="['/chat', topic.label]">

            {{topic.name}}
    
          </a>
          <small> {{topic.number_of_unread_messages}} unread </small>

        </mat-card-title>
        <mat-card-subtitle
        class="card-chatgroup-name">
        
        <a [routerLink]="['/chatgroup', topic.chatgroup_object.label]">

          {{topic.chatgroup_object.name}}        

        </a>

        </mat-card-subtitle>
      </mat-card-header>
    </div>

  <!-- Chat's most recent message -->
  <div class="card-recent-message">
    <!-- The avatar of the user who produced the top message -->
    <div *ngIf="topic.most_recent_message_text" class="card-user-avatar">


      <img 
      *ngIf="!topic.most_recent_message_sender_avatar"
      class="img-fluid rounded-circle" src="http://santetotal.com/wp-content/uploads/2014/05/default-user.png">

      <img 
      *ngIf="topic.most_recent_message_sender_avatar"
      class="pointer img-fluid rounded-circle"
      [src]="topic.most_recent_message_sender_avatar">


    </div>

    <!-- The content of the top message -->
    <div class="card-user-message">
      <span *ngIf="topic.most_recent_message_text">
        {{topic.most_recent_message_text}} 
      </span>

      <span *ngIf="!topic.most_recent_message_text"> 
        This topic is empty, be first to chat 
      </span>
    </div>

    <!-- Clearing the effect of floats -->
    <div style="clear:both"> </div>

  </div>
  </div>

  <!-- Clearing the effect of floats -->
  <div style="clear:both">  </div>

  <!--
  <mat-card-actions class="chat-card-footer">
    <button mat-button>LIKE</button>
    <button mat-button>SHARE</button>
  </mat-card-actions>

  -->

  <mat-card-actions class="chat-card-actions" *ngIf="showButtons">
    <div class="float-left">
      <button mat-button (click)="topicService.upvote(topic.label)">
      
          <span *ngIf="topic.upvoted"> REMOVE UPVOTE </span>
          <span *ngIf="!topic.upvoted"> UPVOTE </span>
      
      </button>
      <span>{{topic.rating}}</span>
      <button mat-button (click)="topicService.downvote(topic.label)">
        
          <span *ngIf="topic.downvoted"> REMOVE DOWNVOTE </span>
          <span *ngIf="!topic.downvoted"> DOWNVOTE </span>

      </button>
    </div>
    <div class="float-right">
      <button mat-button (click)="topicService.save(topic.label)">
          
          <span *ngIf="topic.saved"> UNSAVE </span>
          <span *ngIf="!topic.saved"> SAVE </span>
      
      </button>
      <button mat-button>OPTIONS</button>

      <!-- Menu of potential options -->
      <!--
      <button mat-icon-button [matMenuTriggerFor]="menu">
      <mat-icon>more_vert</mat-icon>
      </button>
      -->

    </div>

    <!-- Clearing the effect of floats -->
    <div style="clear:both">  </div>
  </mat-card-actions>
</mat-card>
